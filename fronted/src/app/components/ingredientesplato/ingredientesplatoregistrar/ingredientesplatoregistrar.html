<div class="container">
<div style="text-align: center; margin: 5%">
    <h2>Registro de Ingredientes por Plato</h2>
</div>

<div style="text-align: center; margin: 5%">
    <form [formGroup]="form" (submit)="aceptar()">

    <!-- Nombre del ingrediente en el plato -->
    <mat-form-field>
        <mat-label>Nombre del ingrediente</mat-label>
        <input matInput formControlName="nombre_ingrediente" />
        <mat-error>
        @if (form.get('nombre_ingrediente')?.hasError('required')) {
            Ingrese el ingrediente 
        }
        </mat-error>
    </mat-form-field>
    <br />
    
    <!-- Cantidad -->
    <mat-form-field>
        <mat-label>Cantidad</mat-label>
        <input
        matInput
        type="number"
        min="0"
        max="20"
        formControlName="cantidad"
        />
        <mat-error>
    
        @if (form.get('cantidad')?.hasError('min') || form.get('cantidad')?.hasError('max')) {
            La cantidad debe estar entre 1 y 20
        }
        </mat-error>
    </mat-form-field>
    <br />

<!-- Tipo de unidad -->
<div
  style="
    margin-bottom: 16px;
    display: flex;
    flex-direction: column;
    align-items: center;
  "
>
  <label style="margin-bottom: 8px;">Tipo de unidad</label>

  <mat-radio-group
    formControlName="tipo_unidad"
    style="display: flex; justify-content: center; gap: 16px;"
  >
    <mat-radio-button value="g">Gramos (g)</mat-radio-button>
    <mat-radio-button value="ml">Mililitros (ml)</mat-radio-button>
    <mat-radio-button value="unidad">Unidad</mat-radio-button>
  </mat-radio-group>

  <div style="color: #f44336; font-size: 12px; margin-top: 4px;">
    @if (form.get('tipo_unidad')?.touched && form.get('tipo_unidad')?.hasError('required')) {
      Seleccione un tipo de unidad!!
    }
  </div>
</div>


    <!-- Plato -->
    <mat-form-field>
        <mat-label>Plato</mat-label>
        <mat-select formControlName="platoId">
        @for (p of listaPlato; track p) {
            <mat-option [value]="p.id_plato">
            {{ p.nombre_plato }}
            </mat-option>
        }
        </mat-select>
        <mat-error>
        @if (form.get('platoId')?.hasError('required')) {
            Seleccione un plato
        }
        </mat-error>
    </mat-form-field>
    <br />

    <!-- Ingrediente base -->
    <mat-form-field>
        <mat-label>Ingrediente</mat-label>
        <mat-select formControlName="ingredienteId">
        @for (i of listaIngrediente; track i) {
            <mat-option [value]="i.id_ingredientes">
            {{ i.nombre_ingrediente }}
            </mat-option>
        }
        </mat-select>
        <mat-error>
        @if (form.get('ingredienteId')?.hasError('required')) {
            Seleccione un ingrediente!!
        }
        </mat-error>
    </mat-form-field>
    <br />

    <!-- Botones -->
    <div>
        <button mat-raised-button color="primary" type="submit">
        {{ edicion ? 'Actualizar' : 'Registrar' }}
        </button>
        <button mat-raised-button color="warn" routerLink="/resena" type="button">
        Cancelar
        </button>
    </div>

    </form>
</div>
</div>
